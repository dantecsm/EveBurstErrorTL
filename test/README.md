# 测试目录

此目录包含用于测试和验证的脚本。

## 测试脚本

### compare-cc-files.test.ts

比较 `data/JP CC` 和 `data/EN CC` 两个目录中的同名文件内容是否一致。

#### 用法

```bash
bun run test/compare-cc-files.test.ts
```

#### 功能

- 读取两个目录中的所有 `.CC` 文件
- 比较同名文件的字节内容
- 报告相同和不同的文件
- 显示详细的差异信息

#### 退出码

- `0`: 所有文件都相同
- `1`: 存在差异或错误

---

### compare-txt-files.test.ts

比较 `ref/OLD_JP_TXT` (SJIS 编码) 和 `data/JP TXT` (UTF-8 编码) 两个目录中的同名文本文件内容是否一致。

#### 用法

```bash
bun run test/compare-txt-files.test.ts
```

#### 功能

- 读取两个目录中的所有 `.txt` 文件
- 自动将 SJIS 编码转换为 UTF-8 进行比较
- 比较同名文件的文本内容
- 报告相同和不同的文件
- 显示详细的差异信息（包括差异位置的上下文）

#### 退出码

- `0`: 所有文件都相同
- `1`: 存在差异或错误

---

### command-auto-detect.test.ts

测试命令的自动检测功能，验证 `decompress` 和 `compress` 命令能够正确识别文件和目录。

#### 用法

```bash
bun run test/command-auto-detect.test.ts
```

#### 测试内容

1. 单文件解压
2. 目录解压
3. 单文件压缩
4. 目录压缩
5. 不存在的路径（错误处理）

#### 输出示例

```
测试命令自动检测功能

============================================================

测试 1: 单文件解压
退出码: 0
✓ 通过

测试 2: 目录解压（创建测试目录）
退出码: 0
✓ 通过

...

============================================================
清理测试文件...
✓ 测试完成
```
